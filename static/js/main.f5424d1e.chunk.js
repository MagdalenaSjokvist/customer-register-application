(this["webpackJsonpcustomer-register-for-small-business"]=this["webpackJsonpcustomer-register-for-small-business"]||[]).push([[0],{27:function(e,t,n){e.exports=n(40)},32:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),l=n(21),i=n.n(l),u=(n(32),n(3)),o=n(1),s=n(2),m=n(4),f=Object(a.createContext)({});function d(){var e=Object(o.a)(["\n* {\n  box-sizing: border-box;\n  margin: 0;\n  font-family: 'Poppins', sans-serif;\n}\n\n\n\nh1 {\n  font-size: 1.7rem;\n  margin: 2vh 0 3vh 0;\n  text-align:center;\n}\n\nh2 {\n  font-size: 1.5rem;\n  margin: 2vh 0 3vh 0;\n  text-align: center;\n\n}\n\nh3 {\n  font-size: 0.9rem;\n  margin: 2vh 0;\n\n}\n\np {\n  font-size: 12px;\n}\n\na {\n  text-decoration: none;\n  color: white;\n}\n\nbutton {\n  cursor: pointer;\n  padding: 0.5rem;\n  max-width: 150px;\n  margin-top: 0.8rem; \n  margin-bottom: 0.8rem;\n  margin-right: 0.4rem;\n  font-size: 0.8rem;\n  border: none;\n  border-radius: 3px;\n  color: white;\n  background: #3B628C;\n}\n\nlabel{\n  font-size: 0.8rem;\n  width: 100%;\n}\n\ninput {\n  height: 32px;\n  width: 100%;\n  min-width: 200px;\n  margin: 0.2rem 0 0.5rem 0 ;\n  border: none;\n  border-radius: 3px;\n  background: white;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.1), 0 2px 8px 0 rgba(0, 0, 0, 0.1);\n}\n\ntable {\n  border-collapse: collapse;\n  text-align: left;\n  width: 40vw;\n  min-width: 350px;\n}\n\nthead{\n  background-color: #3B628C;\n  color: white;\n  height: 60px;\n}\n\ntr {\n  height: 20px;\n  font-size: small;\n  \n}\n\nth, td {\n  width: 80px;\n  padding: 0.3rem;\n  font-size: smaller;\n}\n"]);return d=function(){return e},e}var b=Object(s.a)(d()),h=n(6),p=n.n(h),g=n(11),v=n(25),E=n(26),O="https://frebi.willandskill.eu/",j="".concat(O,"api/v1/"),x="".concat(O,"auth/"),k=("".concat(O,"api-token-auth/"),function(){function e(){Object(v.a)(this,e)}return Object(E.a)(e,[{key:"registerAccount",value:function(){var e=Object(g.a)(p.a.mark((function e(t,n,a,r,c,l){var i,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat(x,"users/"),u={firstName:t,lastName:n,email:a,password:r,organisationName:c,organisationKind:l},e.abrupt("return",fetch(i,{method:"POST",headers:this.getPublicHeaders(),body:JSON.stringify(u)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r,c,l){return e.apply(this,arguments)}}()},{key:"activateAccount",value:function(){var e=Object(g.a)(p.a.mark((function e(t,n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(O,"auth/users/activate/"),r={uid:t,token:n},e.abrupt("return",fetch(a,{method:"POST",headers:this.getPublicHeaders(),body:JSON.stringify(r)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(g.a)(p.a.mark((function e(t,n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(O,"api-token-auth/"),r={email:t,password:n},e.abrupt("return",fetch(a,{method:"POST",headers:this.getPublicHeaders(),body:JSON.stringify(r)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getActiveUser",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(j,"me"),e.abrupt("return",fetch(t,{headers:this.getPrivateHeaders()}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCustomerList",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(j,"customers"),e.abrupt("return",fetch(t,{headers:this.getPrivateHeaders()}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createCustomer",value:function(){var e=Object(g.a)(p.a.mark((function e(t,n,a,r,c,l,i,u){var o,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="".concat(j,"customers"),s={name:t,organisationNr:n,vatNr:a,reference:r,paymentTerm:c,website:l,email:i,phoneNumber:u},e.abrupt("return",fetch(o,{method:"POST",headers:this.getPrivateHeaders(),body:JSON.stringify(s)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r,c,l,i,u){return e.apply(this,arguments)}}()},{key:"fetchCustomerDetails",value:function(){var e=Object(g.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(j,"customers/").concat(t,"/"),e.abrupt("return",fetch(n,{headers:this.getPrivateHeaders()}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteCustomer",value:function(){var e=Object(g.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(j,"customers/").concat(t,"/"),e.abrupt("return",fetch(n,{method:"DELETE",headers:this.getPrivateHeaders()}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCustomer",value:function(){var e=Object(g.a)(p.a.mark((function e(t,n,a,r,c,l,i,u,o){var s,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="".concat(j,"customers/").concat(t,"/"),m={name:n,organisationNr:a,vatNr:r,reference:c,paymentTerm:l,website:i,email:u,phoneNumber:o},e.abrupt("return",fetch(s,{method:"PUT",headers:this.getPrivateHeaders(),body:JSON.stringify(m)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r,c,l,i,u,o){return e.apply(this,arguments)}}()},{key:"setToken",value:function(e){localStorage.setItem("BUSINESS_TOKEN",e)}},{key:"getToken",value:function(){return localStorage.getItem("BUSINESS_TOKEN")}},{key:"deleteToken",value:function(){localStorage.removeItem("BUSINESS_TOKEN")}},{key:"getPublicHeaders",value:function(){return{"Content-Type":"application/json"}}},{key:"getPrivateHeaders",value:function(){return{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.getToken())}}}]),e}());function w(){var e=Object(o.a)(["\n\tfont-size: 14px;\n"]);return w=function(){return e},e}function y(){var e=Object(o.a)(["\n\tfont-size: 24px;\n\tpadding: 0.4rem;\n"]);return y=function(){return e},e}function S(){var e=Object(o.a)(["\n\tmargin-top: 0.5rem;\n"]);return S=function(){return e},e}function N(){var e=Object(o.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\theight: 160px;\n\tpadding: 1rem;\n\tmargin-top: 10vh;\n\tbackground: #3b628c;\n\tcolor: white;\n\tfont-size: 14px;\n"]);return N=function(){return e},e}function T(){var e=Object(o.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tpadding: 3rem;\n"]);return T=function(){return e},e}function C(){var e=Object(o.a)(["\n\ttext-align: right;\n\tfont-size: 10px;\n\tmargin-bottom: 0.3rem;\n"]);return C=function(){return e},e}function A(){var e=Object(o.a)(["\n\tdisplay: inline-block;\n\tlist-style: none;\n\tfont-size: 16px;\n\tfont-weight: bold;\n\tpadding-left: 1.8rem;\n"]);return A=function(){return e},e}function P(){var e=Object(o.a)([""]);return P=function(){return e},e}function z(){var e=Object(o.a)(["\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\talign-content: center;\n"]);return z=function(){return e},e}function L(){var e=Object(o.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\tpadding: 2.5rem;\n\tbackground: #3b628c;\n\theight: 90px;\n\tcolor: white;\n"]);return L=function(){return e},e}function U(){var e=Object(o.a)(["\n\tbackground: #c0e3f0;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\theight: 100%;\n"]);return U=function(){return e},e}var B=s.b.div(U()),H=s.b.nav(L()),I=s.b.div(z()),X=Object(s.b)(I)(P()),K=s.b.li(A()),M=s.b.p(C()),J=s.b.main(T()),R=s.b.footer(N()),D=s.b.div(S()),G=s.b.a(y()),V=s.b.p(w());function W(e){var t=e.children,n=Object(a.useContext)(f),l=n.activeUser,i=n.setActiveUser,u=new k,o=u.getToken(),s=Object(m.f)();return Object(a.useEffect)((function(){u.getActiveUser().then((function(e){return e.json()})).then((function(e){return i(e)}))}),[]),r.a.createElement(B,null,r.a.createElement(H,null,o&&r.a.createElement(M,null,"Inloggad som: ",l.email),o?r.a.createElement(I,null,r.a.createElement(V,null,"My business AB"),r.a.createElement("ul",null,r.a.createElement(K,null,r.a.createElement(c.b,{to:"/home"},"MINA KUNDER")),r.a.createElement(K,null,r.a.createElement(c.b,{to:"/login",onClick:function(){u.deleteToken(),s.push("/login"),window.location.reload()}},"LOGGA UT")))):r.a.createElement(X,null,r.a.createElement(V,null,"My business AB"),r.a.createElement("ul",null,r.a.createElement(K,null,r.a.createElement(c.b,{to:"/"},"HEM")),r.a.createElement(K,null,r.a.createElement(c.b,{to:"/login"},"LOGGA IN"))))),r.a.createElement(J,null,t),r.a.createElement(R,null,r.a.createElement(V,null,"My business AB"),r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-map-marker"})," Klippgatan 8A, Solna"),r.a.createElement(D,null,r.a.createElement(G,{href:"mailto:magdalena.sjokvist@gmail.com"},r.a.createElement("i",{className:"fa fa-envelope-o"})),r.a.createElement(G,{href:"https://www.linkedin.com/in/magdalenasjokvist/"},r.a.createElement("i",{className:"fa fa-linkedin-square"})),r.a.createElement(G,{href:"https://www.linkedin.com/in/magdalenasjokvist/"},r.a.createElement("i",{className:"fa fa-facebook"})))))}function _(){var e=Object(o.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin-bottom: 5px;\n\twidth: 35vw;\n\tmin-width: 200px;\n"]);return _=function(){return e},e}function q(){var e=Object(o.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n"]);return q=function(){return e},e}var F=s.b.form(q()),$=s.b.label(_());function Q(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(""),i=Object(u.a)(l,2),o=i[0],s=i[1],m=Object(a.useState)(""),f=Object(u.a)(m,2),d=f[0],b=f[1],h=Object(a.useState)(""),p=Object(u.a)(h,2),g=p[0],v=p[1],E=Object(a.useState)(""),O=Object(u.a)(E,2),j=O[0],x=O[1],w=Object(a.useState)(""),y=Object(u.a)(w,2),S=y[0],N=y[1],T=new k,C=[["F\xf6rnamn","text","",n,c],["Efternamn","text","",o,s],["E-post","email","Ex. info@mail.se",d,b],["L\xf6senord","password","Minst 8 tecken",g,v],["Organisationsnamn","text","",j,x],["Organisationstyp","text","V\xe4lj 0, 1 eller 2",S,N]];return r.a.createElement("div",null,r.a.createElement("h1",null,"Registrera dig"),r.a.createElement(F,null,function(e){return e.map((function(e,t){return r.a.createElement($,{key:t},e[0],r.a.createElement("input",{type:e[1],placeholder:e[2],value:e[3],onChange:function(t){e[4](t.target.value)}}))}))}(C),r.a.createElement("button",{onClick:function(){T.registerAccount(n,o,d,g,j,S).then(c(""),s(""),b(""),v(""),x(""),N("")).then(alert("Tack f\xf6r din registrering! Du f\xe5r strax ett bekr\xe4ftelsemejl med en l\xe4nk. Klicka p\xe5 l\xe4nken f\xf6r att aktivera ditt konto."))}},"Registrera dig")))}function Y(){var e=Object(o.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin-bottom: 5px;\n\twidth: 100%;\n"]);return Y=function(){return e},e}function Z(){var e=Object(o.a)(["\n\twidth: 35vw;\n\tmin-width: 200px;\n\theight: 45vh;\n"]);return Z=function(){return e},e}function ee(){var e=Object(o.a)(["\n\tmargin: 1.5rem;\n\theight: 50px;\n\twidth: 50%;\n\tmax-width: 400px;\n"]);return ee=function(){return e},e}function te(){var e=Object(o.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n"]);return te=function(){return e},e}var ne=s.b.div(te()),ae=s.b.button(ee()),re=s.b.div(Z()),ce=s.b.label(Y());function le(){var e=Object(m.f)(),t=new URLSearchParams(e.location.search),n=Object(a.useState)(t.get("uid")),c=Object(u.a)(n,2),l=c[0],i=c[1],o=Object(a.useState)(t.get("token")),s=Object(u.a)(o,2),f=s[0],d=s[1],b=Object(a.useState)(""),h=Object(u.a)(b,2),p=h[0],g=h[1],v=Object(a.useState)(""),E=Object(u.a)(v,2),O=E[0],j=E[1],x=new k;return r.a.createElement("div",null,l&&f?r.a.createElement(ne,null,r.a.createElement("h1",null,"Aktivera ditt konto"),r.a.createElement("p",null,"Klicka p\xe5 knappen nedan f\xf6r att aktivera ditt konto och logga in."),r.a.createElement(ae,{onClick:function(){x.activateAccount(l,f).then((function(){i(null),d(null),e.push("/login")}))}},"Aktivera ditt konto nu ",r.a.createElement("i",{className:"\tfa fa-check"}))):r.a.createElement(re,null,r.a.createElement("h1",null,"Logga in"),r.a.createElement(ce,null,"E-post",r.a.createElement("input",{type:"email",placeholder:"Ex. info@mail.se",value:p,onChange:function(e){return g(e.target.value)}})),r.a.createElement(ce,null,"L\xf6senord",r.a.createElement("input",{type:"password",placeholder:"L\xf6senord",value:O,onChange:function(e){return j(e.target.value)}})),r.a.createElement("button",{onClick:function(){x.login(p,O).then((function(e){return e.json()})).then((function(t){x.setToken(t.token),e.push("/home"),window.location.reload()}))}},"Logga in")))}function ie(){var e=Object(o.a)(["\n\twidth: 100%;\n"]);return ie=function(){return e},e}function ue(){var e=Object(o.a)(["\n\tbackground: white;\n\tpadding: 1.5rem;\n\tmargin: 2rem 0;\n\tborder-radius: 5px;\n"]);return ue=function(){return e},e}function oe(){var e=Object(o.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin-bottom: 5px;\n\tmax-width: 700px;\n"]);return oe=function(){return e},e}function se(){var e=Object(o.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n"]);return se=function(){return e},e}var me=s.b.div(se()),fe=s.b.label(oe()),de=s.b.div(ue()),be=s.b.button(ie());function he(){var e=Object(a.useContext)(f).activeUser,t=Object(a.useState)(""),n=Object(u.a)(t,2),l=n[0],i=n[1],o=Object(m.f)(),s=Object(a.useState)(""),d=Object(u.a)(s,2),b=d[0],h=d[1],p=Object(a.useState)(""),g=Object(u.a)(p,2),v=g[0],E=g[1],O=Object(a.useState)(""),j=Object(u.a)(O,2),x=j[0],w=j[1],y=Object(a.useState)(""),S=Object(u.a)(y,2),N=S[0],T=S[1],C=Object(a.useState)(""),A=Object(u.a)(C,2),P=A[0],z=A[1],L=Object(a.useState)(""),U=Object(u.a)(L,2),B=U[0],H=U[1],I=Object(a.useState)(""),X=Object(u.a)(I,2),K=X[0],M=X[1],J=Object(a.useState)(""),R=Object(u.a)(J,2),D=R[0],G=R[1],V=new k,W=[["Namn","text","",b,h],["Organisationsnummer","text","XXXXXX-XXXX",v,E],["VAT-nummer","text","Ex: SE1234567890",x,w],["Referens","text","",N,T],["Betalningsvillkor","text","Ange antal dagar",P,z],["Webb","text","",B,H],["E-post","email","",K,M],["Telefon","text","",D,G]];function _(){V.getCustomerList().then((function(e){return e.json()})).then((function(e){i(e.results)}))}return Object(a.useEffect)((function(){_()}),[]),r.a.createElement("div",null,r.a.createElement("h2",null,"V\xe4lkommen ",e.firstName," ",e.lastName),r.a.createElement(de,null,r.a.createElement("h3",null,"Mina kunder"),""==l?r.a.createElement("p",null,"Du har inte lagt till n\xe5gra kunder \xe4n."):r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Namn"),r.a.createElement("th",null,"Org.nr"),r.a.createElement("th",null,"Referens"),r.a.createElement("th",null))),r.a.createElement("tbody",null,l&&l.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.organisationNr),r.a.createElement("td",null,e.reference),r.a.createElement("td",null,r.a.createElement(c.b,{to:"/customer/".concat(e.id)},r.a.createElement(be,null,"Mer info"," ",r.a.createElement("i",{className:"fa fa-angle-double-right"})))))}))))),r.a.createElement(me,null,r.a.createElement("h3",null,"L\xe4gg till en ny kund"),function(e){return e.map((function(e,t){return r.a.createElement(fe,{key:t},e[0],r.a.createElement("input",{type:e[1],placeholder:e[2],value:e[3],onChange:function(t){e[4](t.target.value)}}))}))}(W),r.a.createElement("button",{onClick:function(){V.createCustomer(b,v,x,N,P,B,K,D).then(_()).then(h(""),E(""),w(""),T(""),z(""),H(""),M(""),G("")).then(window.location.reload()).then(o.push("/home"))}},"L\xe4gg till")))}function pe(){var e=Object(o.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin-bottom: 5px;\n\tmax-width: 700px;\n"]);return pe=function(){return e},e}function ge(){var e=Object(o.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n"]);return ge=function(){return e},e}function ve(){var e=Object(o.a)(["\n\tbackground: white;\n\tpadding: 1.5rem;\n\tmargin: 2rem 0;\n\tborder-radius: 5px;\n\twidth: 50vw;\n\tmin-width: 350px;\n\tpadding: 2rem 3rem;\n"]);return ve=function(){return e},e}var Ee=s.b.div(ve());s.b.div(ge()),s.b.label(pe());function Oe(e){var t=e.match.params.id,n=Object(a.useState)(""),l=Object(u.a)(n,2),i=l[0],o=l[1],s=Object(m.f)(),f=new k;return Object(a.useEffect)((function(){f.fetchCustomerDetails(t).then((function(e){return e.json()})).then((function(e){console.log(e),o(e)}))}),[]),r.a.createElement("div",null,r.a.createElement("h1",null,"Kunddetaljer "),r.a.createElement(Ee,null,r.a.createElement("h3",null,i.name),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Organisationsnr: "),r.a.createElement("td",null,i.organisationNr)),r.a.createElement("tr",null,r.a.createElement("td",null,"VAT-nr:"),r.a.createElement("td",null,i.vatNr)),r.a.createElement("tr",null,r.a.createElement("td",null,"Referens:"),r.a.createElement("td",null,i.reference)),r.a.createElement("tr",null,r.a.createElement("td",null,"Betalningsvillkor:"),r.a.createElement("td",null,i.paymentTerm," dagar")),r.a.createElement("tr",null,r.a.createElement("td",null,"Webb:"),r.a.createElement("td",null,i.website)),r.a.createElement("tr",null,r.a.createElement("td",null,"Telefon:"),r.a.createElement("td",null,i.phoneNumber)))),r.a.createElement(c.b,{to:"/home"},r.a.createElement("button",null,r.a.createElement("i",{className:"fa fa-angle-double-left"})," Tillbaka")),r.a.createElement("button",{onClick:function(){f.deleteCustomer(t).then(s.push("/home")).then(f.getCustomerList())}},"Ta bort")))}function je(){var e=Object(o.a)(["\n\tpadding: 2rem;\n\tbackground: #c0e3f0;\n\tdisplay: flex;\n\tjustify-content: center;\n\theight: 100%;\n"]);return je=function(){return e},e}s.b.div(je());var xe=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1];return r.a.createElement("div",null,r.a.createElement(b,null),r.a.createElement(f.Provider,{value:{activeUser:n,setActiveUser:c}},r.a.createElement(W,null,r.a.createElement(m.c,null,r.a.createElement(m.a,{path:"/customer/:id",render:function(e){return r.a.createElement(Oe,e)}}),r.a.createElement(m.a,{path:"/home"},r.a.createElement(he,null)),r.a.createElement(m.a,{path:"/login"},r.a.createElement(le,null)),r.a.createElement(m.a,{path:"/"},r.a.createElement(Q,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,null,r.a.createElement(xe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.f5424d1e.chunk.js.map